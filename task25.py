# todo: Шифр Цезаря
# Описание шифра.
# В криптографии шифр Цезаря, также известный шифр сдвига, код Цезаря или сдвиг Цезаря,
# является одним из самых простых и широко известных методов шифрования.
# Это тип подстановочного шифра, в котором каждая буква в открытом тексте заменяется буквой на некоторое
# фиксированное количество позиций вниз по алфавиту. Например, со сдвигом влево 3, D будет заменен на A,
# E станет Б, и так далее. Метод назван в честь Юлия Цезаря, который использовал его в своей частной переписке.
#
# Задача.
# Считайте файл message.txt и зашифруйте  текст шифром Цезаря, при этом символы первой строки файла должны
# циклически сдвигаться влево на 1, второй строки — на 2, третьей строки — на три и т.д.
# В этой задаче удобно считывать файл построчно, шифруя каждую строку в отдельности.
# В каждой строчке содержатся различные символы. Шифровать нужно только буквы кириллицы.

# Алфавит кириллицы (строчные буквы)
alphabet = 'абвгдеёжзийклмнопрстуфхцчшщъыьэюя'

with open("message.txt", "r", encoding="utf-8") as infile, \
        open("encrypted.txt", "w", encoding="utf-8") as outfile:
    # Перебираем строки файла с нумерацией (начиная с 1)
    for line_num, line in enumerate(infile, 1):
        encrypted_line = ""  # Здесь будет зашифрованная строка

        # Обрабатываем каждый символ в строке
        for char in line:
            if char.lower() in alphabet:  # Если это кириллическая буква
                # Определяем регистр
                is_upper = char.isupper()
                base_char = char.lower()

                # Находим индекс буквы в алфавите
                idx = alphabet.index(base_char)

                # Сдвигаем влево на номер строки (line_num)
                shifted_idx = (idx - line_num) % len(alphabet)

                # Получаем зашифрованную букву
                encrypted_char = alphabet[shifted_idx]

                # Возвращаем регистр, если был заглавным
                if is_upper:
                    encrypted_char = encrypted_char.upper()

                encrypted_line += encrypted_char
            else:
                # Некириллические символы оставляем без изменений
                encrypted_line += char

        # Записываем зашифрованную строку в выходной файл
        outfile.write(encrypted_line)

print("Шифрование завершено. Результат записан в encrypted.txt")

